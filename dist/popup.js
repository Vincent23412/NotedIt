(()=>{"use strict";function e(e){return new Promise((t=>{chrome.storage.local.get(e,(n=>{t(n[e])}))}))}var t=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function r(e){try{a(o.next(e))}catch(e){i(e)}}function d(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("note-list"),t=document.getElementById("note"),c=document.getElementById("save-button");n(e,t),c.addEventListener("click",o(e,t))}));const n=(n,o)=>t(void 0,void 0,void 0,(function*(){const t=(yield e("notes"))||[];n.innerHTML="",t.forEach((e=>{c(e,n)}))})),o=(n,o)=>()=>t(void 0,void 0,void 0,(function*(){var t;const i=o.value;if(!i)return;const[r,d]=yield Promise.all([e("notes"),chrome.tabs.query({active:!0,currentWindow:!0})]),a=r||[],u={content:i,url:(null===(t=d[0])||void 0===t?void 0:t.url)||"unknown"};var l;a.push(Object.assign({},u)),yield(l={notes:a},new Promise((e=>{chrome.storage.local.set(l,(()=>{e()}))}))),o.value="",c(u,n)})),c=(e,t)=>{const n=document.createElement("li"),o=document.createElement("div");o.textContent=`📝 ${e.content}`;const c=document.createElement("a");c.href=e.url,c.textContent=`🔗 ${e.url}`,c.target="_blank",n.appendChild(o),n.appendChild(c),t.appendChild(n)}})();